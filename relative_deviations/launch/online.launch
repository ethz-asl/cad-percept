<?xml version="1.0" encoding="utf-8"?>

<launch>

  <arg name="map_frame" default="/map" />
  <arg name="icp_configuration_file" default="$(find relative_deviations)/launch/icp_configuration.yaml" />
  <arg name="selective_icp_configuration_file" default="$(find relative_deviations)/launch/selective_icp_configuration.yaml" />
  <arg name="normal_filter_file" default="$(find relative_deviations)/launch/normal_filter.yaml" />
  <arg name="reference_model_file" default="$(find relative_deviations)/resources/room.off" />
  <arg name="test" default="1" />
  <arg name="discrete_color" default="false" />
  <arg name="score_threshold" default="0.015" />

  <!-- node -->
  <node name="relative_dev"
        pkg="relative_deviations"
        type="relative_deviations_node"
        output="screen"
        respawn="true">
    <param name="reference_model_file" value="$(arg reference_model_file)" />
    <param name="test" value="$(arg test)" />
    <param name="map_frame" value="$(arg map_frame)" />
    <param name="icp_configuration_file" value="$(arg icp_configuration_file)" />
    <param name="selective_icp_configuration_file" value="$(arg selective_icp_configuration_file)" />
    <param name="normal_filter_file" value="$(arg normal_filter_file)" />
    <param name="discrete_color" value="$(arg discrete_color)" />
    <param name="score_threshold" value="$(arg score_threshold)" />
  </node>

  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find relative_deviations)/launch/online.rviz" />
</launch>
